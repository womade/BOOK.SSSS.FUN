!function(a,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():a.ClipboardJS=e()}(this,function(){function a(b){if(c[b])return c[b].exports;var f=c[b]={i:b,l:!1,exports:{}};return e[b].call(f.exports,f,f.exports,a),f.l=!0,f.exports}return c={},a.m=e=[function(a,c){a.exports=function(a){if("SELECT"===a.nodeName)a.focus(),a=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var b=a.hasAttribute("readonly");b||a.setAttribute("readonly","");a.select();a.setSelectionRange(0,a.value.length);b||a.removeAttribute("readonly");a=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var b=window.getSelection(),c=document.createRange();c.selectNodeContents(a);b.removeAllRanges();b.addRange(c);a=b.toString()}return a}},function(a,c){function b(){}b.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){f.off(a,d);b.apply(c,arguments)}var f=this;return d._=b,this.on(a,d,c)},emit:function(a){for(var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,f=c.length;d<f;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],f=[];if(d&&b)for(var e=0,g=d.length;e<g;e++)d[e].fn!==b&&d[e].fn._!==b&&f.push(d[e]);return f.length?c[a]=f:delete c[a],this}};a.exports=b;a.exports.TinyEmitter=b},function(a,c,d){var b=d(3),f=d(4);a.exports=function(a,c,d){if(!a&&!c&&!d)throw Error("Missing required arguments");if(!b.string(c))throw new TypeError("Second argument must be a String");if(!b.fn(d))throw new TypeError("Third argument must be a Function");if(b.node(a))return p=c,q=d,(t=a).addEventListener(p,q),{destroy:function(){t.removeEventListener(p,q)}};if(b.nodeList(a))return k=a,n=c,l=d,Array.prototype.forEach.call(k,function(a){a.addEventListener(n,l)}),{destroy:function(){Array.prototype.forEach.call(k,function(a){a.removeEventListener(n,l)})}};if(b.string(a))return e=a,g=c,h=d,f(document.body,e,g,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var e,g,h,k,n,l,t,p,q}},function(a,c){c.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType};c.nodeList=function(a){var b=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===b||"[object HTMLCollection]"===b)&&"length"in a&&(0===a.length||c.node(a[0]))};c.string=function(a){return"string"==typeof a||a instanceof String};c.fn=function(a){return"[object Function]"===Object.prototype.toString.call(a)}},function(a,c,d){function b(a,b,c,d,e){var g=function(a,b,c,d){return function(c){c.delegateTarget=f(c.target,b);c.delegateTarget&&d.call(a,c)}}.apply(this,arguments);return a.addEventListener(c,g,e),{destroy:function(){a.removeEventListener(c,g,e)}}}var f=d(5);a.exports=function(a,c,d,e,f){return"function"==typeof a.addEventListener?b.apply(null,arguments):"function"==typeof d?b.bind(null,document).apply(null,arguments):("string"==typeof a&&(a=document.querySelectorAll(a)),Array.prototype.map.call(a,function(a){return b(a,c,d,e,f)}))}},function(a,c){if("undefined"!=typeof Element&&!Element.prototype.matches){var b=Element.prototype;b.matches=b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector}a.exports=function(a,b){for(;a&&9!==a.nodeType;){if("function"==typeof a.matches&&a.matches(b))return a;a=a.parentNode}}},function(a,c,d){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function e(a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");!0;this.resolveOptions(a);this.initSelection()}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function l(a,b){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");!0;var c;c=(l.__proto__||Object.getPrototypeOf(l)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!=typeof c&&"function"!=typeof c?this:c;return c.resolveOptions(b),c.listenClick(a),c}function k(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}d.r(c);a=d(0);var r=d.n(a),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},y=(function(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}(e,[{key:"resolveOptions",value:function(a){var b=0<arguments.length&&void 0!==a?a:{};this.action=b.action;this.container=b.container;this.emitter=b.emitter;this.target=b.target;this.text=b.text;this.trigger=b.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake();this.fakeHandlerCallback=function(){return a.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[b?"right":"left"]="-9999px";this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=r()(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=r()(this.target);this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(p){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus();document.activeElement.blur();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(a){if(this._action=0<arguments.length&&void 0!==a?a:"copy","copy"!==this._action&&"cut"!==this._action)throw Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==(void 0===a?"undefined":u(a))||1!==a.nodeType)throw Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function(){return this._target}}]),e);a=d(1);a=d.n(a);var v=d(2),w=d.n(v),x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=(function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(l,a.a),function(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}(l,[{key:"resolveOptions",value:function(a){var b=0<arguments.length&&void 0!==a?a:{};this.action="function"==typeof b.action?b.action:this.defaultAction;this.target="function"==typeof b.target?b.target:this.defaultTarget;this.text="function"==typeof b.text?b.text:this.defaultText;this.container="object"===x(b.container)?b.container:document.body}},{key:"listenClick",value:function(a){var b=this;this.listener=w()(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){a=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new y({action:this.action(a),target:this.target(a),text:this.text(a),container:this.container,trigger:a,emitter:this})}},{key:"defaultAction",value:function(a){return k("action",a)}},{key:"defaultTarget",value:function(a){if(a=k("target",a))return document.querySelector(a)}},{key:"defaultText",value:function(a){return k("text",a)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(a){var b=0<arguments.length&&void 0!==a?a:["copy","cut"],c=!!document.queryCommandSupported;return("string"==typeof b?[b]:b).forEach(function(a){c=c&&!!document.queryCommandSupported(a)}),c}}]),l);c["default"]=d}],a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,c){if((1&c&&(b=a(b)),8&c)||4&c&&"object"==typeof b&&b&&b.__esModule)return b;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var e in b)a.d(d,e,function(a){return b[a]}.bind(null,e));return d},a.n=function(b){var c=b&&b.__esModule?function(){return b["default"]}:function(){return b};return a.d(c,"a",c),c},a.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},a.p="",a(a.s=6)["default"];var e,c});var ispc=function(){return 800<$(window).width()&&500<$(window).height()?!0:!1},isiOS=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isTouch="ontouchstart"in window?!0:!1,httporhttps="https:"==document.location.protocol?"https://":"http://",domain=httporhttps+window.location.host;$(document).on("touchstart",function(a){a=$(a.target);a.hasClass("disable")||a.data("isMoved",0)});$(document).on("touchmove",function(a){a=$(a.target);a.hasClass("disable")||a.data("isMoved",1)});$(document).on("touchend",function(a){a=$(a.target);a.hasClass("disable")||0!=a.data("isMoved")||a.trigger("tap")});var click=isTouch?"tap":"click",bookspophtml={mask:function(){return'\x3cdiv id\x3d"mask" class\x3d"abtn" name\x3d"close"\x3e\x3c/div\x3e'},openbook:{"int":function(a){var e="";"undefined"!==typeof $OP&&$OP.hasOwnProperty("hideviews")&&$OP.hideviews&&(e="hide");if(ispc()){var c=a.url?'\x3ca class\x3d"activ" name\x3d"url" data-lang\x3d"Web"\x3e'+lang("Web")+"\x3c/a\x3e":"",b=a.wxburl?'\x3ca name\x3d"wxb" data-lang\x3d"WeChat"\x3e'+lang("WeChat")+"\x3c/a\x3e":"",f='\x3ca name\x3d"xcx" data-lang\x3d"XCX"\x3e'+lang("XCX")+"\x3c/a\x3e",d=a.pdfurl?'\x3ca name\x3d"pdf" data-lang\x3d"PDF"\x3e'+lang("PDF")+"\x3c/a\x3e":"",g=a.exeurl?'\x3ca name\x3d"exe" data-lang\x3d"EXE"\x3e'+lang("EXE")+"\x3c/a\x3e":"",h=a.apkurl?'\x3ca name\x3d"apk" data-lang\x3d"Android"\x3e'+lang("Android")+"\x3c/a\x3e":"",n=a.iPhoneurl?'\x3ca name\x3d"iPhone" data-lang\x3d"iPhone"\x3e'+lang("iPhone")+"\x3c/a\x3e":"",l=a.ipadurl?'\x3ca name\x3d"iPad" data-lang\x3d"iPad"\x3e'+lang("iPad")+"\x3c/a\x3e":"",k=a.macurl?'\x3ca name\x3d"mac" data-lang\x3d"MAC"\x3e'+lang("MAC")+"\x3c/a\x3e":"",b=c+b+f+d+g+h+n+l+k,f="",c=lang("View");switch($(".pop[name\x3d'openbook']\x3e.h\x3e.activ").attr("name")){case void 0:case"url":f=bookspophtml.openbook.cover(a.thumbnail);break;case"wxb":f=bookspopfun.qrcode($(".openbox .box"),"c",a.randid)}b='\x3cdiv class\x3d"pop openbox" name\x3d"openbook"\x3e\x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-guanbi"\x3e\x3c/i\x3e\x3c/a\x3e'+('\x3cdiv class\x3d"h"\x3e'+b+"\x3c/div\x3e")+'\x3cdiv class\x3d"b"\x3e'+('\x3cdiv class\x3d"l"\x3e\x3cdiv class\x3d"box"\x3e'+f+"\x3c/div\x3e\x3c/div\x3e");b+='\x3cdiv class\x3d"r"\x3e\x3ch3\x3e'+a.journal+'\x3c/h3\x3e\x3cdiv class\x3d"publisher"\x3e\x3cspan data-lang\x3d"Publisher"\x3e'+lang("Publisher")+"\x3c/span\x3e\uff1a"+a.publisher[1]+'\x3c/div\x3e\x3cdiv class\x3d"introduce"\x3e'+a.introduce+'\x3c/div\x3e\x3cdiv class\x3d"openclick"\x3e\x3ca class\x3d"abtn anm" name\x3d"url"\x3e'+c+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e"}else b='\x3cdiv class\x3d"pop openbox-mb" name\x3d"openbook"\x3e'+('\x3cdiv class\x3d"h"\x3e\x3cspan data-lang\x3d"BookInformation"\x3e'+lang("BookInformation")+'\x3c/span\x3e\x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-cuo"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e'),b+='\x3cdiv class\x3d"b"\x3e',b+="\x3ch3\x3e"+a.journal+"\x3c/h3\x3e",b+='\x3cdiv class\x3d"publisher"\x3e\x3cspan data-lang\x3d"Publisher"\x3e'+lang("Publisher")+"\x3c/span\x3e\uff1a"+a.publisher[1]+"\x3c/div\x3e",b+='\x3cdiv class\x3d"introduce"\x3e'+a.introduce+"\x3c/div\x3e",b+='\x3cdiv class\x3d"openclick"\x3e\x3ca class\x3d"abtn anm" name\x3d"url" data-lang\x3d"View"\x3e'+lang("View")+"\x3c/a\x3e\x3c/div\x3e";b+="\x3c/div\x3e";b+='\x3cdiv class\x3d"f"\x3e\x3cspan class\x3d"'+e+'"\x3e\x3cspan data-lang\x3d"Views"\x3e'+lang("Views")+"\x3c/span\x3e\uff1a\x3cem\x3e"+million(a.views)+'\x3c/em\x3e\x3c/span\x3e\x3cspan data-lang\x3d"ReleaseTime"\x3e'+lang("ReleaseTime")+"\x3c/span\x3e\uff1a"+a.updated+"\x3c/div\x3e";return b+="\x3c/div\x3e"},cover:function(a){var e=a.w,c=a.h;230<c&&(c=230,e=a.w/a.h*230);230<e&&(e=230,c=a.h/a.w*230);return'\x3cdiv class\x3d"shelf"\x3e\x3c/div\x3e\x3cdiv class\x3d"cover" style\x3d"width:'+e+"px;height:"+c+'px;"\x3e\x3cdiv class\x3d"flash"\x3e\x3c/div\x3e\x3cimg src\x3d"'+a.src+'"\x3e\x3cdiv class\x3d"thickness"\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'}},share:{"int":function(a){a=bookspophtml.share.info(a);var e=a.lang,c=function(a){if(ispc())return"";switch(a){case"wx":a="WeChatfriends";break;case"er":a="QRCode";break;case"fz":a="CopyLink";break;case"yx":a="EmailSharing";break;case"hb":a="GeneratePosters";break;case"kj":a="QQspace";break;case"wb":a="SinaWeibo";break;case"tb":a="BaiduPostBar";break;case"db":a="Douban";break;case"ly":a="LinkedIn";break;default:a=""}return'\x3cp class\x3d"lang" data-lang\x3d"'+a+'"\x3e'+lang(a)+"\x3c/p\x3e"},b='\x3ca class\x3d"fx-qq" target\x3d"_blank" data-lang\x3d"SharetoQQ" title\x3d"'+lang("SharetoQQ")+'" href\x3d"https://connect.qq.com/widget/shareqq/index.html?url\x3d'+a.url+"\x26title\x3d"+a.title+"\x26source\x3d0\x26desc\x3d"+a.desc+"\x26pics\x3d"+a.pics+"\x26summary\x3d"+a.summary+'"\x3e\x3ci class\x3d"iconfont icon-qq"\x3e\x3c/i\x3e'+c("qq")+"\x3c/a\x3e",f='\x3ca class\x3d"fx-kj" target\x3d"_blank" data-lang\x3d"SharetoQQspace" title\x3d"'+lang("SharetoQQspace")+'" href\x3d"https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url\x3d'+a.url+"\x26title\x3d"+a.title+"\x26desc\x3d"+a.desc+"\x26summary\x3d"+a.summary+"\x26site\x3d0\x26pics\x3d"+a.pics+'"\x3e\x3ci class\x3d"iconfont icon-iconfontkongjian"\x3e\x3c/i\x3e'+c("kj")+"\x3c/a\x3e",d='\x3ca class\x3d"fx-wb" target\x3d"_blank" data-lang\x3d"sharetoSinaWeibo" title\x3d"'+lang("sharetoSinaWeibo")+'" href\x3d"https://service.weibo.com/share/mobile.php?url\x3d'+a.url+"\x26title\x3d"+a.title+"\x26pic\x3d"+a.pics+'"\x3e\x3ci class\x3d"iconfont icon-weibo"\x3e\x3c/i\x3e'+c("wb")+"\x3c/a\x3e",g='\x3ca class\x3d"fx-tb" target\x3d"_blank" data-lang\x3d"SharetoBaiduPostBar" title\x3d"'+lang("SharetoBaiduPostBar")+'" href\x3d"https://tieba.baidu.com/f/commit/share/openShareApi?title\x3d'+a.title+"\x26desc\x3d"+a.summary+"\x26pic\x3d"+a.pics+"\x26url\x3d"+a.url+'"\x3e\x3ci class\x3d"iconfont icon-tieba"\x3e\x3c/i\x3e'+c("tb")+"\x3c/a\x3e",h='\x3ca class\x3d"fx-db" target\x3d"_blank" data-lang\x3d"SharetoDouban" title\x3d"'+lang("SharetoDouban")+'" href\x3d"https://www.douban.com/share/service?image\x3d'+a.pics+"\x26href\x3d"+a.url+"\x26name\x3d"+a.title+"\x26text\x3d"+a.summary+'"\x3e\x3ci class\x3d"iconfont icon-douban"\x3e\x3c/i\x3e'+c("db")+"\x3c/a\x3e",n='\x3ca class\x3d"fx-ly" target\x3d"_blank" data-lang\x3d"SharetoLinkedIn" title\x3d"'+lang("SharetoLinkedIn")+'" href\x3d"https://www.linkedin.com/shareArticle?mini\x3dtrue\x26ro\x3dtrue\x26title\x3d'+a.title+"\x26url\x3d"+a.url+"\x26source\x3d0\x26summary\x3d"+a.summary+'\x26armin\x3darmin"\x3e\x3ci class\x3d"iconfont icon-lingying"\x3e\x3c/i\x3e'+c("ly")+"\x3c/a\x3e",l='\x3ca class\x3d"fx-yy abtn" name\x3d"fx-yy" data-lang\x3d"SharetoEmile" title\x3d"'+lang("SharetoEmile")+'"\x3e\x3ci class\x3d"iconfont icon-youxiang"\x3e\x3c/i\x3e'+c("yx")+"\x3c/a\x3e",k='\x3ca class\x3d"fx-hb abtn" name\x3d"bill" type\x3d"'+a.type+'" randid\x3d"'+a.randid+'" data-lang\x3d"CreatePoster" title\x3d"'+lang("CreatePoster")+'"\x3e\x3ci class\x3d"iconfont icon-haibao"\x3e\x3c/i\x3e'+c("hb")+"\x3c/a\x3e";ispc()?(f=b+f+d+g+h+n+l+k,d='\x3ciframe style\x3d"width:100%;height:500px" src\x3d"'+a.shareurl+'" seamless\x3d"seamless" scrolling\x3d"no" frameborder\x3d"0" allowtransparency\x3d"true" allowfullscreen\x3d"true"\x3e',d=html2Escape(d),d='\x3cdiv class\x3d"ljfz"\x3e\x3cinput type\x3d"text" id\x3d"fxlj" value\x3d"'+a.shareurl+'"\x3e\x3cbutton class\x3d"lang copyLink" name\x3d"Copysharelink" data-lang\x3d"Copysharelink" data-clipboard-text\x3d"'+a.shareurl+'"\x3e'+lang("Copysharelink")+'\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"qrdm"\x3e\x3cinput type\x3d"text" id\x3d"fxdm" value\x3d"'+d+'"\x3e\x3cbutton class\x3d"lang copyLink" name\x3d"Copyembedcode" data-lang\x3d"Copyembedcode" data-clipboard-text\x3d"'+d+'"\x3e'+lang("Copyembedcode")+"\x3c/button\x3e\x3c/div\x3e",a='\x3cdiv class\x3d"pop sharebox" name\x3d"share"\x3e\x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-guanbi"\x3e\x3c/i\x3e\x3c/a\x3e'+('\x3cdiv class\x3d"h"\x3e\x3ch1 data-lang\x3d"'+e+'"\x3e'+lang(e)+'\x3c/h1\x3e\x3cp\x3e\x3cspan data-lang\x3d"Share"\x3e'+lang("Share")+"\x3c/span\x3e\u300a"+a.title+'\u300b\x3cspan data-lang\x3d"Toyourfriends"\x3e'+lang("Toyourfriends")+"\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e"),a=a+'\x3cdiv class\x3d"b clear fxnrbox"\x3e'+('\x3cdiv class\x3d"l"\x3e\x3cdiv class\x3d"lbtnbox"\x3e'+f+'\x3c/div\x3e\x3cdiv class\x3d"lfzkbox"\x3e'+d+"\x3c/div\x3e\x3c/div\x3e")+('\x3cdiv class\x3d"r"\x3e\x3cdiv class\x3d"rwmbox"\x3e\x3cdiv id\x3d"qrcode"\x3e\x3c/div\x3e\x3cdiv id\x3d"xcxqrcode" class\x3d"hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rbtnbox"\x3e\x3cbutton class\x3d"wxb activ" data-lang\x3d"PTQRcode"\x3e'+lang("PTQRcode")+'\x3c/button\x3e\x3cbutton class\x3d"xcxb" data-lang\x3d"Applets"\x3e'+lang("Applets")+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e"),a=a+"\x3c/div\x3e"+('\x3cdiv class\x3d"mailbox hide"\x3e\x3ca class\x3d"abtn" name\x3d"mailbox-back"\x3e\x3ci class\x3d"iconfont icon-fanhui"\x3e\x3c/i\x3e\x3cspan data-lang\x3d"Return"\x3e'+lang("Return")+'\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"tt" data-lang\x3d"EmailSharing"\x3e'+lang("EmailSharing")+'\x3c/div\x3e\x3cdiv class\x3d"nr"\x3e\x3cinput class\x3d"inputBox" placeholder\x3d"'+lang("EnterEmail")+'" maxlength\x3d"50" data-lang\x3d"EnterEmail"\x3e\x3c/div\x3e\x3cdiv class\x3d"ft"\x3e\x3ca class\x3d"abtn" name\x3d"postmail" data-lang\x3d"Send"\x3e'+lang("Send")+'\x3c/a\x3e\x3cp class\x3d"er hide"\x3e\x3ci class\x3d"iconfont icon-tanhao"\x3e\x3c/i\x3e\x3cfont\x3e\x3c/font\x3e\x3c/p\x3e\x3cp class\x3d"ok hide"\x3e\x3ci class\x3d"iconfont icon-chenggong"\x3e\x3c/i\x3e\x3cfont\x3e\x3c/font\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'),a+="\x3c/div\x3e"):(e='\x3ca class\x3d"fx-wx abtn" name\x3d"wxshare"\x3e\x3ci class\x3d"iconfont icon-weixin"\x3e\x3c/i\x3e'+c("wx")+"\x3c/a\x3e",b='\x3ca class\x3d"fx-er abtn" name\x3d"ewmbox"\x3e\x3ci class\x3d"iconfont icon-erweima"\x3e\x3c/i\x3e'+c("er")+"\x3c/a\x3e",c='\x3ca class\x3d"fx-lj abtn copyLink" name\x3d"CopyLink" data-clipboard-text\x3d"'+a.shareurl+'"\x3e\x3ci class\x3d"iconfont icon-lianjie"\x3e\x3c/i\x3e'+c("fz")+"\x3c/a\x3e",f="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e"+e+"\x3c/td\x3e\x3ctd\x3e"+b+"\x3c/td\x3e\x3ctd\x3e"+c+"\x3c/td\x3e\x3ctd\x3e"+l+"\x3c/td\x3e\x3ctd\x3e"+k+"\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e"+f+"\x3c/td\x3e\x3ctd\x3e"+d+"\x3c/td\x3e\x3ctd\x3e"+g+"\x3c/td\x3e\x3ctd\x3e"+h+"\x3c/td\x3e\x3ctd\x3e"+n+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",a='\x3cdiv class\x3d"slide sharebox-mb" name\x3d"share"\x3e'+('\x3cdiv class\x3d"h"\x3e\x3cdiv class\x3d"btnbox"\x3e'+lang("Share")+"\u300a"+a.title+'\u300b\x3c/div\x3e\x3cdiv class\x3d"ewmbox hide"\x3e\x3ca class\x3d"abtn" name\x3d"ewmbox-back"\x3e\x3ci class\x3d"iconfont icon-fanhui"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"r" data-lang\x3d"Longpresstosave"\x3e'+lang("Longpresstosave")+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"mailbox hide"\x3e\x3ca class\x3d"abtn" name\x3d"mailbox-back"\x3e\x3ci class\x3d"iconfont icon-fanhui"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan\x3e'+lang("EmailSharing")+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"),a+='\x3cdiv class\x3d"b"\x3e\x3cdiv class\x3d"btnbox"\x3e'+f+'\x3c/div\x3e\x3cdiv class\x3d"ewmbox hide"\x3e\x3cdiv class\x3d"rwmbox"\x3e\x3cdiv id\x3d"qrcode"\x3e\x3cdiv\x3e\x3ccanvas width\x3d"430" height\x3d"430"\x3e\x3c/canvas\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"xcxqrcode" class\x3d"hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rbtnbox"\x3e\x3cbutton class\x3d"wxb activ" data-lang\x3d"PTQRcode"\x3e'+lang("PTQRcode")+'\x3c/button\x3e\x3cbutton class\x3d"xcxb" data-lang\x3d"Applets"\x3e'+lang("Applets")+'\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mailbox hide"\x3e\x3cdiv class\x3d"nr"\x3e\x3cinput class\x3d"inputBox inputts" data-lang\x3d"EnterEmail" placeholder\x3d"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba\u90ae\u7bb1\u53f7" maxlength\x3d"50"\x3e\x3c/div\x3e\x3cdiv class\x3d"ft"\x3e\x3ca class\x3d"postmail abtn" name\x3d"postmail" data-lang\x3d"Send"\x3e\u53d1\u9001\x3c/a\x3e\x3cp class\x3d"er hide"\x3e\x3ci class\x3d"iconfont icon-tanhao"\x3e\x3c/i\x3e\x3cfont\x3e\x3c/font\x3e\x3c/p\x3e\x3cp class\x3d"ok hide"\x3e\x3ci class\x3d"iconfont icon-chenggong"\x3e\x3c/i\x3e\x3cfont\x3e\x3c/font\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',a+='\x3cdiv class\x3d"f abtn" name\x3d"close" data-lang\x3d"Cancel"\x3e'+lang("Cancel")+"\x3c/div\x3e",a+='\x3c/div\x3e\x3cdiv class\x3d"sharetips abtn" name\x3d"sharetips"\x3e\x3c/div\x3e');return a},info:function(a){if(a.hasOwnProperty("homepage")){var e=a.uid,c=domain+"/u/"+e,b=domain+"/x/u/"+e,e=sharesite+"/u/"+e,f=a.title,d="\u5feb\u770b\u770b\u6211\u5236\u4f5c\u7684\u4f5c\u54c1\u600e\u4e48\u6837\uff1f",g=$("meta[itemprop\x3d'image']").attr("content"),h=$("meta[name\x3d'description']").attr("content"),n=a.title,l="ShareHomepage",k=a.uid;a="u"}else a.hasOwnProperty("level")&&0==a.level?(k=a.randid,c=domain+"/"+k,b=domain+"/x/"+k,e=sharesite+"/"+k,f=a.journal,d="\u5feb\u770b\u770b\u6211\u5236\u4f5c\u7684\u4f5c\u54c1\u600e\u4e48\u6837\uff1f",g=a.logo,h=a.introduce,n=a.publisher[1],l="ShareBookshelf",a="c"):a.hasOwnProperty("bookshelfs")?(k=a.randid,c=domain+"/f/"+k,b=domain+"/x/f/"+k,e=sharesite+"/f/"+k,f=a.name,d="\u5feb\u770b\u770b\u6211\u5236\u4f5c\u7684\u4f5c\u54c1\u600e\u4e48\u6837\uff1f",g=a.logo,h=a.seods,n="",l="ShareBookRoom",a="f"):(k=a.randid,c=domain+"/"+k,b=domain+"/x/"+k,e=sharesite+"/"+k,f=a.journal,d="\u5feb\u770b\u770b\u6211\u5236\u4f5c\u7684\u4f5c\u54c1\u600e\u4e48\u6837\uff1f",g=a.thumbnail.src,h=a.introduce,n=a.publisher[1],l="ShareBook",a="c");return{randid:k,type:a,url:c,xcxurl:b,title:f,desc:d,pics:g,summary:h,publisher:n,shareurl:e,lang:l}}},bill:{"int":function(){var a="";1024<=$(window).width()&&(a='\x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-guanbi"\x3e\x3c/i\x3e\x3c/a\x3e');return'\x3cdiv class\x3d"pop bill" name\x3d"bill"\x3e'+a+'\x3cdiv class\x3d"canvasbox"\x3e\x3c/div\x3e\x3c/div\x3e'}},preview:{"int":function(a){var e=domain+"/"+a.randid,c="",b="",f="",d="\u6536\u85cf",g=0<a.price?a.price+"\u4e66\u5e01":"\u514d\u8d39";"undefined"!==typeof isLogin&&isLogin&&1==a.cost&&1<user.userlevel.level&&(g="\u4f1a\u5458\u514d\u8d39");if("undefined"!==typeof isLogin&&"undefined"!==typeof user&&user.hasOwnProperty("collection")){var h=user.collection,h=h.substring(0,h.lastIndexOf(",")).split(",");inArray(a.id,h)&&(f="activ",d="\u5df2\u6536\u85cf")}if("templet"==m||"template"==hash())b=0==a.model?"\u4e66\u520a\u6a21\u5f0f":"\u5e7b\u706f\u6a21\u5f0f",c='\x3cdiv class\x3d"side"\x3e'+("\x3ch2\x3e"+a.journal+"\x3c/h2\x3e\x3ch5\x3e"+a.keyword+"\x3c/h5\x3e"),c+='\x3cdiv class\x3d"author"\x3e\x3cimg src\x3d"'+a.avatar+'"\x3e\x3cspan\x3e'+a.publisher[1]+'\x3c/span\x3e\x3ca target\x3d"_blank" href\x3d"/u/'+a.userid+'"\x3e\x3ci class\x3d"iconfont icon-home"\x3e\x3c/i\x3e\u8fdb\u5165\u4e3b\u9875\x3c/a\x3e\x3c/div\x3e',c+='\x3cdiv class\x3d"action"\x3e\x3cspan\x3e\x3ci class\x3d"iconfont icon-yanjing"\x3e\x3c/i\x3e\x3cfont\x3e'+a.views+'\x3c/font\x3e\x3c/span\x3e\x3cspan\x3e\x3ci class\x3d"iconfont icon-lianjie"\x3e\x3c/i\x3e\x3ca class\x3d"copyLink" name\x3d"preview" data-clipboard-text\x3d"'+a.url+'"\x3e\x3cu\x3e\u590d\u5236\u94fe\u63a5\x3c/u\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"abtn '+f+'" name\x3d"collection"\x3e\x3ci class\x3d"iconfont icon-xihuan"\x3e\x3c/i\x3e\x3ca class\x3d"mbsc_lk" randid\x3d"SnxbJRAGUS"\x3e'+d+"\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e",c+='\x3cdiv class\x3d"info"\x3e \x3cp\x3e\x3cspan\x3e\u4f5c\u54c1\u6a21\u5f0f\x3c/span\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/p\x3e \x3cp\x3e\x3cspan\x3e\u9875\u9762\u5c3a\u5bf8\x3c/span\x3e\x3cspan\x3e\x3cfont\x3e"+a.pagesize_w+"\x3c/font\x3e*\x3cfont\x3e"+a.pagesize_h+"\x3c/font\x3e px\x3c/span\x3e\x3c/p\x3e \x3cp\x3e\x3cspan\x3e\u56fe\u7247\u66ff\u6362\x3c/span\x3e\x3cspan\x3e\u53ef\u4ee5\u66ff\u6362\x3c/span\x3e\x3c/p\x3e \x3cp\x3e\x3cspan\x3e\u6587\u5b57\u7f16\u8f91\x3c/span\x3e\x3cspan\x3e\u53ef\u4ee5\u7f16\u8f91\x3c/span\x3e\x3c/p\x3e \x3cp\x3e\x3cspan\x3e\u4f7f\u7528\u6b21\u6570\x3c/span\x3e\x3cspan\x3e\u4e0d\u9650\u6b21\u6570\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e",c=c+('\x3cdiv class\x3d"buy"\x3e\x3cspan class\x3d"price"\x3e'+g+'\x3c/span\x3e \x3ca class\x3d"abtn" name\x3d"recharge"\x3e\u5145\u503c\u4f1a\u5458/\u4e66\u5e01 \x26gt;\x3c/a\x3e \x3ca class\x3d"abtn" name\x3d"use"\x3e\u7acb\u5373\u4f7f\u7528\x3c/a\x3e\x3c/div\x3e')+"\x3c/div\x3e",b="tp";return'\x3cdiv class\x3d"pop preview '+b+'" name\x3d"preview"\x3e \x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-guanbi"\x3e\x3c/i\x3e\x3c/a\x3e \x3cdiv class\x3d"top"\x3e \x3ca class\x3d"activ" name\x3d"pc"\x3e\x3ci class\x3d"iconfont icon-pc"\x3e\x3c/i\x3e\x3c/a\x3e \x3ca name\x3d"ipad-h"\x3e\x3ci class\x3d"iconfont icon-ipad-h"\x3e\x3c/i\x3e\x3c/a\x3e \x3ca name\x3d"ipad"\x3e\x3ci class\x3d"iconfont icon-ipad"\x3e\x3c/i\x3e\x3c/a\x3e \x3ca name\x3d"iphone-h"\x3e\x3ci class\x3d"iconfont icon-iPhone-h"\x3e\x3c/i\x3e\x3c/a\x3e \x3ca name\x3d"iphone"\x3e\x3ci class\x3d"iconfont icon-iPhone"\x3e\x3c/i\x3e\x3c/a\x3e \x3ca name\x3d"qrcode"\x3e\x3ci class\x3d"iconfont icon-erweima"\x3e\x3c/i\x3e\x3ci class\x3d"iconfont icon-below-s"\x3e\x3c/i\x3e\x3cdiv class\x3d"qrcodebox"\x3e\x3cdiv id\x3d"qrcode"\x3e\x3c/div\x3e\x3cp\x3e\u5fae\u4fe1\u626b\u4e00\u626b\x3c/p\x3e\x3c/div\x3e\x3c/a\x3e \x3c/div\x3e \x3cdiv class\x3d"body"\x3e \x3cdiv class\x3d"device" name\x3d"pc"\x3e \x3ciframe seamless\x3d"seamless" scrolling\x3d"no" frameborder\x3d"0" allowtransparency\x3d"true" allowfullscreen\x3d"true" style\x3d"margin:0px; padding:0px; border:0;" src\x3d"'+e+'"\x3e\x3c/iframe\x3e \x3c/div\x3e \x3c/div\x3e'+c+"\x3c/div\x3e"}}},bookspopfun={shareevent:function(){$(".lfzkbox input").hover(function(){$(this).select()},function(){$(this).blur()});$(".rbtnbox button").hover(function(){$(this).addClass("activ").siblings().removeClass("activ");$(this).hasClass("wxb")?($("#qrcode").removeClass("hide"),$("#xcxqrcode").addClass("hide")):($("#qrcode").addClass("hide"),$("#xcxqrcode").removeClass("hide"))})},qrcode:function(a,e,c){e=sharesite+e+c;c=$("\x3cdiv\x3e\x3c/div\x3e");c.qrcode({render:"canvas",size:430,text:e,mode:0,fill:"#000",background:"#fff",quiet:2,radius:.5});if("canvas"==a)return c.find("canvas")[0];a.html($("\x3cdiv\x3e\x3c/div\x3e").html(c.find("canvas")))},xcxcode:function(a,e,c){a.html("\x3cdiv\x3e\x3c/div\x3e").children("div").addClass("data-loading");post({w:"index",h:"appletcode",l:"no",x:e,y:c},function(b){1==b.code&&(thisimg='\x3cdiv\x3e\x3cimg src\x3d"'+b.data.code+'" contextmenu\x3d"true"\x3e\x3cdiv\x3e',a.html(thisimg).children("div").removeClass("data-loading"))})},lang:function(a){$.getScript("/static/out/bookshelf/js/bookshelf.lang.js",function(){$("[data-lang]").each(function(){var e=$(this).attr("data-lang");"undefined"!==typeof $(this).attr("placeholder")?$(this).attr("placeholder",sbooklang[e][a]):"undefined"!==typeof $(this).attr("title")?$(this).attr("title",sbooklang[e][a]):$(this).text(sbooklang[e][a])})})},preview:function(){var a=$(".preview iframe").attr("src");$(".preview #qrcode").qrcode({render:"canvas",size:430,text:a,mode:0,fill:"#000",background:"#fff",quiet:2,radius:.5});$(".preview .top\x3ea").click(function(){var a=$(this).attr("name");switch(a){case"pc":case"ipad-h":case"ipad":case"iphone-h":case"iphone":$(this).addClass("activ").siblings().removeClass("activ");$(".device").attr("name",a);break;default:return!1}})}},lazyImg={"int":function(a){lazyImg.updata();lazyImg.scroll(a)},updata:function(a){var e=$(window).height();(a?$("[data-original]",a):$("[data-original]")).each(function(a){var b=$(this),c=b.offset().top,d=b.outerHeight(!0),g=$(window).scrollTop();if(!(g>c+d||g<c-e)){var h=b.attr("data-original");$("\x3cimg /\x3e").bind("load",function(){b.hide();setTimeout(function(){b.attr("src",h).removeAttr("data-original").fadeIn("fast")},8*a)}).attr("src",h)}})},scroll:function(a){a=a||$(document);var e;a.scroll(function(){e&&clearTimeout(e);e=setTimeout(function(){lazyImg.updata()},50)})}};function mask(a){switch(a){case 0:$("#mask").remove();isTouch||$(document).unbind("scroll.unable");break;case 1:if(0==$("#mask").length&&$("body").append(bookspophtml.mask()),!isTouch){var e=$(document).scrollTop();$(document).on("scroll.unable",function(a){$(document).scrollTop(e)})}}}function pop(a,e,c,b){b||(b="pop");c||(c=e);if(0!==a){mask(1);$("body").append(a[e]["int"](c));var f=$("."+b+"[name\x3d'"+e+"']");f.show();c&&f.data("info",c);setTimeout(function(){f.addClass("activ");tippy("[title]")},20)}else f="all"==e?$(".pop,.slide"):$("."+b+"[name\x3d'"+e+"']"),(2>$(".pop,.slide").length||"all"==e)&&mask(0),f.removeClass("activ"),setTimeout(function(){f.remove();"undefined"!==typeof setIntervalGetQRcode&&clearInterval(setIntervalGetQRcode);"undefined"!==typeof setIntervalCheckLogin&&clearInterval(setIntervalCheckLogin);"undefined"!==typeof setIntervalCheckPay&&clearInterval(setIntervalCheckPay)},300)}function uritojson(a){return JSON.parse(decodeURIComponent(a))}function jsontouri(a){return encodeURIComponent(JSON.stringify(a))}function html2Escape(a){return a.replace(/[<>&"]/g,function(a){return{"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;",'"':"\x26quot;"}[a]})}function lang(a){if(a)try{return sbooklang[a][language]}catch(e){return $.ajax({async:!1,url:"/static/out/bookshelf/js/bookshelf.lang.js",dataType:"script"}),sbooklang[a][language]}else return""}function escape2Html(a){var e={lt:"\x3c",gt:"\x3e",nbsp:" ",amp:"\x26",quot:'"'};return a.replace(/&(lt|gt|nbsp|amp|quot);/ig,function(a,b){return e[b]})}function postmail(a){var e=a.parent().prev().children("input");a=bookspophtml.share.info($(".pop[name\x3d'share']").data("info")||$(".slide[name\x3d'share']").data("info"));e=e.val();switch(isEmail(e)){case 0:$(".mailbox .er").removeClass("hide").children("font").text("\u90ae\u7bb1\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a\uff01");break;case 1:$(".mailbox .er").removeClass("hide").children("font").text("\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e\uff01");break;case 2:$("a[name\x3d'postmail']").text("\u6b63\u5728\u53d1\u9001..."),$(".mailbox .er").addClass("hide"),post({w:"out",h:"mail",l:"no",url:a.shareurl,mail:e},function(a){$("a[name\x3d'postmail']").text("\u53d1\u9001");1==a.code?$("a[name\x3d'postmail']").siblings(".ok").removeClass("hide").children("font").text("\u53d1\u9001\u6210\u529f"):$("a[name\x3d'postmail']").siblings(".er").removeClass("hide").children("font").text(a.message)})}}function isEmail(a){var e=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return""==a?0:e.test(a)?2:1}function makehb(a,e){var c=a.attr("type"),b=a.attr("randid"),f=ispc()?"pop":"slide";$("."+f+"[name\x3d'share']").addClass("hide");0==$("#jtbox").length&&$("body").append('\x3cdiv id\x3d"jtbox"\x3e\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cimg src\x3d""\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3cdiv class\x3d"nrbox"\x3e\x3ch3\x3e\x3c/h3\x3e\x3cp\x3e\x3c/p\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3cimg class\x3d"ewm" src\x3d""\x3e\x3cdiv class\x3d"footbox"\x3e\x3cp\x3e\u957f\u6309\u672c\u56fe\u7247\u8bc6\u522b\u4e8c\u7ef4\u7801\x3c/p\x3e\x3ch3\x3e\u5fae\u4fe1\u8bc6\u7801\u9605\u8bfb\x3c/h3\x3e\x3c/div\x3e \x3c/div\x3e');if(1==e){var d=$OP;0==$(".bill").length&&$("body").append(bookspophtml.bill["int"]());$(".bill").css({display:"block",left:2*$(window).width()}).addClass("activ")}else d=bookspophtml.share.info($("."+f+"[name\x3d'share']").data("info"));var g=$(window).width(),f=$(window).height(),h=g-20,n=787/480*h;n>f-20&&(n=f-20,h=n/(787/480));$(".bill").css({width:h,height:n});d.hasOwnProperty("logo")&&(d.pics=d.logo);d.hasOwnProperty("thumbnail")&&(d.pics=d.thumbnail.src);f=""!==d.publisher&&"ShareBookshelf"!==d.lang?"object"==typeof d.publisher?d.publisher[1]:d.publisher:"";$("#jtbox .nrbox\x3eh3").text(d.title||d.journal);$("#jtbox .nrbox\x3ep").text(d.summary||d.introduce);$("#jtbox .nrbox\x3ediv").html('\x3cimg src\x3d"/static/index/img/zuozhe.png"\x3e'+f);c=1==e?bookspopfun.qrcode("canvas",c,b).toDataURL("image/png"):$("#qrcode canvas")[0].toDataURL("image/jpeg");$("#jtbox .ewm").attr("src",c);$("#jtbox table img").attr("src",d.pics);$.getScript("/static/index/js/html2canvas.min.js",function(){html2canvas($("#jtbox")[0],{useCORS:!0,allowTaint:!0,dpi:2*window.devicePixelRatio,scale:2,width:480,heigth:787,scrollY:0,scrollX:0}).then(function(a){if(1==e)saveFile(a.toDataURL("image/png"),$OP.journal+"-\u5206\u4eab\u6d77\u62a5.png"),jiazaied($(".btnbox\x3ea[name\x3d'fxhb']"));else{$("#jtbox").remove();var b=1024>g?"\x3cdiv\x3e\x3cspan\x3e"+lang("LongPressToSave")+'\x3c/span\x3e\x3ca class\x3d"abtn" name\x3d"close"\x3e\x3ci class\x3d"iconfont icon-guanbi"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e':'\x3cdiv\x3e\x3ca class\x3d"abtn" name\x3d"downthisimg" data-name\x3d"'+d.title+'"\x3e'+lang("DownloadPic")+"\x3c/a\x3e\x3c/div\x3e";$(".bill\x3e.canvasbox").html('\x3cimg src\x3d"'+a.toDataURL("image/png")+'" contextmenu\x3d"true"\x3e').append(b);1024>g?($(".canvasbox\x3eimg").css({width:h,height:n}),$(".canvasbox\x3ediv").css({opacity:"1"})):$(".canvasbox\x3eimg").css({width:"100%",height:"100%"})}})})}function convertImgToBase64(a,e){$.ajax({type:"GET",timeout:0,url:a,success:function(c){var b=document.createElement("CANVAS"),f=b.getContext("2d"),d=new Image;d.crossOrigin="Anonymous";d.onload=function(){b.height=d.height;b.width=d.width;f.drawImage(d,0,0);try{var a=b.toDataURL("image/png",1);e.call(this,a);b=null}catch(h){}};d.src=a}})}function saveFile(a,e){var c=document.createElementNS("http://www.w3.org/1999/xhtml","a");c.href=a;c.download=e;var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(b)}function stopPropagation(a){a=a||window.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function million(a){var e;9999<a?e=Math.floor(a/100)/100+lang("TenThousand"):9999>=a&&-9999<a?e=a:-9999>a&&(e=-(Math.floor(Math.abs(a)/1E3)/10)+lang("TenThousand"));return e}function hash(a){a=a||0;return location.hash?location.hash.replace("#","").split("/")[a]:""}function goUrl(a){a=0==a.booktype?sharesite+"/"+a.randid:a.url;"undefined"!==typeof $OP&&$OP.hasOwnProperty("target")&&"_blank"!==$OP.target?("_self"==$OP.target&&(window.location.href=a),"iframe"==$OP.target&&(pop(0,"openbook"),$("body").append(shelfhtml.webpage(a)))):window.open(a,"_blank")}$(function(){language=0;var a=window.location.href.split("#")[1];"undefined"!=typeof a&&(-1!=a.indexOf("en")&&(language=2),-1!=a.indexOf("zh-tw")&&(language=1));bookspopfun.lang(language);$("body").on(click,".open",function(a){stopPropagation(a);a=uritojson($(this).data("info"));"undefined"!==typeof $OP&&$OP.hasOwnProperty("hidepanel")&&$OP.hidepanel?goUrl(a):(pop(bookspophtml,"openbook",a),0<$(".openbox-mb").length&&$(".openbox-mb").css("height",125+$(".openbox-mb .b").height()))});$("body").on(click,".openbox\x3e.h\x3ea",function(){var a=$(this).attr("name"),b=$(".openbox").data("info"),e=$(".openbox .openclick\x3ea");e.attr("name",a);$(this).addClass("activ").siblings().removeClass("activ");switch(a){case"url":case"pdf":case"exe":case"apk":case"iPhone":case"iPad":case"mac":b=bookspophtml.openbook.cover(b.thumbnail);$(".openbox .box").html(b);break;case"wxb":b=bookspopfun.qrcode($(".openbox .box"),"/",b.randid);$(".openbox .box").html(b);break;case"xcx":bookspopfun.xcxcode($(".openbox .box"),"/",b.randid)}switch(a){case"url":e.text("\u70b9\u51fb\u9605\u8bfb");break;case"pdf":case"exe":case"apk":case"iPhone":case"iPad":case"mac":e.text("\u70b9\u51fb\u4e0b\u8f7d");break;case"wxb":case"xcx":e.text("\u70b9\u51fb\u9884\u89c8")}});$("body").on(click,".abtn",function(a){var b=$(this),c=b.attr("name"),d=function(){var a=function(){return 0<b.parents(".cell").find(".open-view").length?uritojson(b.parents(".cell").find(".open-view").data("info")):uritojson(b.parents(".cell").find(".open").data("info"))};switch(m){case"c":return b.parent().hasClass("openclick")?b.parents(".pop").data("info"):$OP;case"u":return 0<b.parents(".boxhead").length?b.parents(".box").data("info"):b.parent().hasClass("btns")?user:0<b.parents(".pop").length?b.parents(".pop").data("info"):a();case"v":return uritojson($(".readBook").data("info"));default:return 0<b.parent().siblings(".open").length?a():0<b.parents(".pop").length?b.parents(".pop").data("info"):0<b.parents(".boxhead").length?uritojson(b.parents(".box").data("info")):a()}};switch(c){case"mask":case"close":a="pop";c=b.parents(".activ");c.hasClass("bill")&&$(".sharebox,.sharebox-mb").removeClass("hide");c.hasClass("slide")&&(a="slide");c=c.attr("name")?c.attr("name"):"all";pop(0,c,"",a);break;case"share":a=ispc()?"pop":"slide";pop(bookspophtml,c,d(),a);bookspopfun.shareevent();a=b.attr("type");c=b.attr("randid");bookspopfun.qrcode($("#qrcode"),a,c);bookspopfun.xcxcode($("#xcxqrcode"),a,c);break;case"fx-yy":ispc()?($(".fxnrbox").addClass("hide"),$(".sharebox .mailbox").removeClass("hide"),$(".sharebox .mailbox .er").addClass("hide")):($(".sharebox-mb .mailbox").removeClass("hide"),$(".sharebox-mb .btnbox").addClass("hide"),$(".sharebox-mb .mailbox .er").addClass("hide"));break;case"postmail":postmail(b);break;case"mailbox-back":ispc()?($(".sharebox .mailbox").addClass("hide"),$(".sharebox .fxnrbox").removeClass("hide")):($(".sharebox-mb .mailbox").addClass("hide"),$(".sharebox-mb .btnbox").removeClass("hide"));break;case"bill":pop(bookspophtml,c);makehb(b);break;case"wxshare":$(".sharetips").fadeIn();break;case"sharetips":$(".sharetips").fadeOut();break;case"ewmbox":$(".sharebox-mb .ewmbox").removeClass("hide");$(".sharebox-mb .btnbox").addClass("hide");break;case"ewmbox-back":$(".sharebox-mb .ewmbox").addClass("hide");$(".sharebox-mb .btnbox").removeClass("hide");break;case"wxb":case"xcx":pop(bookspophtml,"preview",d());bookspopfun.preview();break;case"url":goUrl(d());break;case"downthisimg":a=b.parent().siblings("img").attr("src");c=b.attr("data-name")+"-\u5206\u4eab\u6d77\u62a5.jpg";saveFile(a,c);break;case"pdf":window.location.href=d().pdfurl;break;case"exe":window.location.href=d().exeurl}});$("body").on(click,".open-tp",function(){var a=uritojson($(this).data("info"));pop(bookspophtml,"preview",a);$(".preview").data("info",a);bookspopfun.preview()});if(isiOS){var e=null;$("body").on("focus","select,input,textarea",function(){$(this).attr("readonly")||clearTimeout(e)});$("body").on("blur","select,input,textarea",function(){$(this).attr("readonly")||(e=setTimeout(function(){window.scrollTo(0,0)},10))})}a=new ClipboardJS(".copyLink");a.on("success",function(a){var b=$(a.trigger),c=b.attr("name"),d=lang("Successcopy");switch(c){case"preview":b=b.children("u");break;case"tutorial":d="\u94fe\u63a5\u590d\u5236\u6210\u529f";b=b.children("font");break;case"CopyLink":b=b.children("p")}b.text(d);a.clearSelection()});a.on("error",function(a){$.message({message:"\u590d\u5236\u5931\u8d25",type:"error"})});document.addEventListener("error",function(a){a=a.target;"img"==a.tagName.toLowerCase()&&(a.src="/static/index/img/place.png")},!0);window.addEventListener("DOMMouseScroll",function(a){(!0===a.ctrlKey||a.metaKey)&&a.preventDefault()},{passive:!1});window.addEventListener("mousewheel",function(a){(!0===a.ctrlKey||a.metaKey)&&a.preventDefault()},{passive:!1})});
